\documentclass[12pt,twoside,abbrevs,msc,ai,notimes,logo,sansheadings]{infthesis}

% Packages
\usepackage{graphicx}
\usepackage{abbrevs}
\usepackage{acronym}
% Will use listings instead for now. minted isn't included in the ubuntu texlive version. \usepackage{minted}
\usepackage{multirow}

% Added packages
\usepackage{cite}
\usepackage{listings}
\usepackage{hyperref} % for \url
\usepackage{amstext} % for \text

% only needed for \usepackage{fancyvrb}. \renewcommand\theFancyVerbLine{\normalsize\arabic{FancyVerbLine}}

% Added config
\setlength{\parskip}{0pt plus12pt minus4pt}
\raggedbottom

% Project Details
\title{Parallelising Plan Recognition}
\author{Chris Swetenham}
\course{MSc Artificial Intelligence}
\project{Dissertation}

\submityear{2012}
\graduationdate{November 2012}
\date{\today}

\input{sections/misc/i_acronyms}
\input{sections/misc/ii_abstract}

% Extra Package Commands

\begin{document}
  \begin{preliminary}
    % Title Page
    \maketitle

    % Preamble
    \input{sections/misc/iii_acknowledgements}
    \standarddeclaration
    %\input{sections/misc/iv_dedication} TODO?
    \tableofcontents
    \listoffigures
  \end{preliminary}

% Sides per Section (Planned)
% ---------------------------
% Title page 1
% Blank 1
% Abstract 1
% Acknowledgements 1
% Declaration 1
% Blank 1
% TOC 2
% List of Figures 1
% Blank 1
% Intro 1
% Blank 1
% Background 8
% Related Work 1
% Blank 1
% Initial Work 3
% Blank 1
% Method 0 1
% Blank 1
% Method 1 2
% Method 2 3
% Blank 1
% Method 3 4
% Method 4 2
% Analysis 3
% Blank 1
% Conclusion 1
% Bibliography 2
% --------------
% Total 47

  
  % Chapters
  % Introduction: background to the project, previous work, exposition of relevant literature, setting of the work in the proper context.
  \input{sections/01_intro}
  \input{sections/02_background}
  \input{sections/03_related}
  % Description of the work undertaken: this may be divided into chapters describing the conceptual design work and the actual implementation separately. Any problems or difficulties and the suggested solutions should be mentioned. Alternative solutions and their evaluation should be included.
  \chapter{Initial Work}
  Before starting with the implementation of multithreading, we evaluated the existing ELEXIR codebase to detect any potential issues. We used the \emph{Memcheck} tool within the \emph{Valgrind} program on Linux to detect memory leaks which we then fixed. Valgrind dynamically translates the machine code being executed and allows its tools to insert instrumentation before the code is actually executed. Memcheck tracks memory allocations and can warn of both memory leaks and invalid memory accesses.
  
  The reference-counting was changed to use atomic incrementing and decrementing of reference counts, and this was sufficient to ensure thread safety, since threads incrementing the reference count always own at least one reference to it through the expression currently being processed. In order to verify that the changes made to the code did not break existing functionality, we added tests for the results of the algorithm on one of the domains. We also added unit tests for some of the new functionality.
  
  We considered several possible libraries for implementing multithreading. We chose the \emph{Boost Threads} library, which is part of the \emph{Boost} project, over the POSIX threading API for reasons of both convenience and portability; although the code has not yet been ported entirely to Windows, the added code was designed with this future port in mind.
  
  \chapter {Method 0 - Original Single-Threaded ELEXIR}
  TODO - short description of design.
  \section {Implementation}
  TODO - Describe implementation.
  \section{Evaluation}
  \subsection{XPERIENCE Domain}
  TODO
  \subsection{Logistics Domain}
  TODO
  \section{Analysis}
  TODO
  
  \chapter {Method 1 - One Thread Per Task}
  TODO - short description of design. Spawn a thread for each explanation, showing that multithreading the computation works.
  \section {Implementation}
  TODO - Describe implementation.
  \section{Evaluation}
  \subsection{XPERIENCE Domain}
  TODO
  \subsection{Logistics Domain}
  TODO
  \section{Analysis}
  TODO
  \chapter {Method 2 - One Queue Per Thread}
  TODO - short description of design. One queue per thread, main thread redistributes.
  \section {Implementation}
  TODO - Describe implementation. Phases, detecting completion, blocking and signalling on the queue.
  \section{Evaluation}
  \subsection{XPERIENCE Domain}
  TODO
  \subsection{Logistics Domain}
  TODO
  \section{Analysis}
  TODO
  \chapter {Method 3 - Lock-Free Work-Stealing}
  TODO - short description of design. Spawn a thread for each explanation, showing that multithreading the computation works.
  \section {Implementation}
  TODO - Describe implementation. Insertion of memory barriers. Hazard pointers and resizing. Expected properties in terms of load-balancing.
  \section{Evaluation}
  \subsection{XPERIENCE Domain}
  TODO
  \subsection{Logistics Domain}
  TODO
  \section{Analysis}
  TODO
  \chapter {Method 4 - Single Global Queue}
  TODO - short description of design. Single global queue, locking.
  \section {Implementation}
  TODO - Describe implementation.
  \section{Evaluation}
  \subsection{XPERIENCE Domain}
  TODO
  \subsection{Logistics Domain}
  TODO
  \section{Analysis}
  TODO
  
  % \input{sections/04_design}
   
  % \input{sections/05_implementation}
  
  % Analysis: results and their critical analysis should be reported, whether the results conform to expectations or otherwise and how they compare with other related work.
  
  \input{sections/06_evaluation}
  % Conclusion:
  \input{sections/07_conclusion}

  % Appendix
  \appendix

  % \input{sections/appendix/A_evaluation.tex}

  % Bibliography
  \bibliography{sections/misc/z_bib.tex}{}
  \bibliographystyle{unsrt}
\end{document}
